# Задание:

Реализовать сервис по загрузке аудио-файлов от пользователей, используя FastAPI, SQLAlchemy и Docker. Пользователи могут давать файлам имя в самом API.
Авторизацию пользователей реализовать через Яндекс.
Файлы хранить локально, хранилище использовать не нужно.
Использовать асинхронный код.
БД - PostgreSQL 16.

## Ожидаемый результат:

1. Готовое API с возможностью авторизации через Яндекс с последующей аутентификацией к запросам через внутренние токены API.
Доступные эндпоинты: авторизация через яндекс, обновление внутреннего access_token; получение, изменение данных пользователя, удаление пользователя от имени суперпользователя; получение информации о аудио файлах пользователя: название файлов и путь в локальной хранилище.
2. Документация по развертыванию сервиса и БД в Docker.

## Структура проекта:


- [`alembic`](connectors/alembic) - папка с миграциями.
  - [`env.py`](connectors/alembic/env.py) - файл с конфигурацией alembic.
  - [`versions`](connectors/alembic/versions) - папка с версиями миграций.
- [`database`](database) - коннектор к PostgreSQL.
  - [`models`](database/models) - все модели.
- [`Dockerfile`](Dockerfile) - файл для сборки бекенда.
- [`backend`](backend) - папка с кодом бекенда.
  - [`main.py`](backend/main.py) - основной файл с FastAPI.
  - [`api.py`](backend/api.py) - файл с роутами api.
  - [`auth.py`](backend/auth.py) - файл с авторизацией через Яндекс.
  - [`files.py`](backend/files.py) - файл с API файлов.
  - [`user.py`](backend/user.py) - файл с API пользователей.

## Как развернуть:

Я развернул приложение на хостинге Railway.com, отдельно развернув базу данных и backend через отдельные 
Docker-контейнеры. Поскольку Railway не поддерживает docker-compose, сервисы были развернуты раздельно.

![img.png](img.png)

Я выбрал Railway.com, так как он предоставляет возможность получить домен с SSL-сертификатом бесплатно. 
Если потребуется, я могу создать файл docker-compose.yml, который объединит backend и базу данных, а также изменить 
конфигурацию подключения к базе данных.

Следует отметить, что по этой причине файл .env временно размещён в репозитории.

Для авторизации зайдите в браузере по ссылке: https://pavetotest-production.up.railway.app/auth/yandex
Документация к API: https://pavetotest-production.up.railway.app/docs
